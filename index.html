<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ch√° Revela√ß√£o - O Jogo</title>
    <style>
        /* Vari√°veis de cores globais */
        :root {
            --primary-pink: #ffb6c1;
            --primary-blue: #87ceeb;
            --ground-height: 140px; 
        }

        /* Reset b√°sico e desativa√ß√£o de sele√ß√£o de texto */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: #1a1a1a; 
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            touch-action: none;
        }

        /* Contentor principal do jogo (simulando um telem√≥vel) */
        #game-container {
            width: 375px; 
            height: 667px; 
            max-width: 100vw;
            max-height: 100vh;
            background: linear-gradient(to bottom, var(--primary-blue), var(--primary-pink));
            background-size: 100% 200%;
            animation: bgShift 10s ease-in-out infinite alternate;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            border: 8px solid #333;
            border-radius: 40px;
        }

        /* Anima√ß√£o suave do fundo */
        @keyframes bgShift {
            0% { background-position: 0% 0%; }
            100% { background-position: 0% 100%; }
        }

        /* Elementos decorativos (montanhas) */
        .mountain {
            position: absolute;
            bottom: var(--ground-height);
            background: rgba(255, 255, 255, 0.15);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 2;
        }

        /* Part√≠culas de brilho */
        .sparkle {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 3;
            animation: twinkle 2s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        /* √Årea do ch√£o */
        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: var(--ground-height);
            background-color: #ffffff;
            border-top: 6px solid #f0f0f0;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Bot√£o de controlo principal */
        #tap-button {
            width: 80%;
            height: 60px;
            background: linear-gradient(135deg, #eee, #fff);
            border: 3px solid #ddd;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 0 #ccc;
            cursor: pointer;
            transition: all 0.1s;
            z-index: 20;
        }

        #tap-button:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #ccc;
            background: #f9f9f9;
        }

        .tap-text {
            color: #888;
            font-weight: 900;
            font-size: 18px;
            letter-spacing: 2px;
        }

        /* Personagem (Cegonha) */
        #player {
            width: 75px;
            height: 75px;
            position: absolute;
            bottom: var(--ground-height);
            left: 50px;
            z-index: 15;
            transition: opacity 0.3s;
        }

        #player img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        /* Obst√°culos que surgem no jogo */
        .obstacle {
            width: 45px;
            height: 45px;
            position: absolute;
            bottom: var(--ground-height);
            right: -60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            z-index: 12;
        }

        /* Painel de pontua√ß√£o */
        #score-board {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 32px;
            font-weight: 900;
            color: white;
            z-index: 40;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: rgba(0,0,0,0.1);
            padding: 5px 20px;
            border-radius: 20px;
            display: none; 
        }

        /* Anima√ß√£o de salto */
        .jump-animation {
            animation: jump 0.8s cubic-bezier(0.34, 1.5, 0.64, 1);
        }

        @keyframes jump {
            0% { transform: translateY(0) rotate(0deg); }
            45% { transform: translateY(-180px) rotate(-10deg); }
            55% { transform: translateY(-180px) rotate(-10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        /* Camada de sobreposi√ß√£o para menus e modais */
        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 20px;
        }

        /* Estilo das caixas de di√°logo */
        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 30px;
            text-align: center;
            max-width: 320px;
            width: 100%;
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        /* Contentor para a foto final da revela√ß√£o */
        .reveal-container {
            width: 100%;
            height: auto;
            max-height: 250px; 
            margin-bottom: 10px;
            border-radius: 15px;
            overflow: hidden;
            display: none;
            justify-content: center;
            align-items: center;
            background: #f9f9f9;
            border: 2px solid #eee;
        }

        .reveal-container img {
            width: 100%;
            height: 100%;
            object-fit: contain; 
            display: block;
        }

        /* √çcone circular padr√£o do beb√© */
        .baby-photo-default {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin: 0 auto 5px;
            border: 4px solid var(--primary-pink);
            background-color: #f8f8f8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 45px;
        }

        @keyframes pop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Estilo dos bot√µes de a√ß√£o */
        .btn {
            margin-top: 10px;
            padding: 15px 35px;
            border: none;
            border-radius: 25px;
            background: #444;
            color: white;
            font-weight: 800;
            cursor: pointer;
            font-size: 16px;
        }

        .reveal-girl { color: #ff69b4; font-weight: 900; }
        .reveal-boy { color: #1e90ff; font-weight: 900; }

        /* Nuvens decorativas com anima√ß√£o de movimento */
        .cloud {
            position: absolute;
            color: rgba(255, 255, 255, 0.8);
            font-size: 40px;
            animation: moveClouds linear infinite;
            z-index: 5;
        }

        @keyframes moveClouds {
            from { left: 110%; }
            to { left: -80px; }
        }
    </style>
</head>
<body id="main-body">

    <div id="game-container">
        <!-- Elementos fixos do cen√°rio -->
        <div class="mountain" style="width: 150px; height: 80px; left: -30px; opacity: 0.3;"></div>
        <div class="mountain" style="width: 250px; height: 120px; right: -50px; opacity: 0.2;"></div>

        <!-- Tela de In√≠cio -->
        <div id="start-screen" class="overlay">
            <div class="modal-content">
                <div class="baby-photo-default">üë∂</div>
                <h1 style="color: #333; font-size: 24px;">Ch√° Revela√ß√£o</h1>
                <p style="color: #666; margin: 10px 0;">Ajude a cegonha na jornada para revelar o segredo!</p>
                <button class="btn" style="background: var(--primary-blue); color: #333;" onclick="startGame()">Come√ßar Viagem</button>
            </div>
        </div>

        <!-- Interface de Jogo -->
        <div id="score-board">0000</div>
        
        <div id="player" style="opacity: 0;">
            <img src="https://cdn-icons-png.freepik.com/512/7433/7433080.png" alt="Cegonha">
        </div>

        <div class="ground">
            <div id="tap-button" style="display: none;">
                <span class="tap-text">PULAR</span>
            </div>
        </div>

        <!-- Modal gen√©rico para checkpoints, game over e revela√ß√£o -->
        <div id="modal-overlay" class="overlay" style="display: none;">
            <div class="modal-content">
                <div id="checkpoint-icon" class="baby-photo-default">‚ú®</div>
                
                <div id="reveal-image-container" class="reveal-container">
                    <img id="reveal-image-src" src="" alt="Revela√ß√£o">
                </div>

                <h2 id="modal-title" style="font-size: 20px;">Mensagem</h2>
                <p id="modal-body" style="margin: 10px 0; color: #555;"></p>
                <button class="btn" id="modal-btn" onclick="closeModal()">Continuar</button>
            </div>
        </div>
    </div>

    <script>
        // Sele√ß√£o de elementos do DOM
        const player = document.getElementById("player");
        const gameContainer = document.getElementById("game-container");
        const scoreBoard = document.getElementById("score-board");
        const modalOverlay = document.getElementById("modal-overlay");
        const startScreen = document.getElementById("start-screen");
        const modalTitle = document.getElementById("modal-title");
        const modalBody = document.getElementById("modal-body");
        const checkpointIcon = document.getElementById("checkpoint-icon");
        const revealContainer = document.getElementById("reveal-image-container");
        const revealImageSrc = document.getElementById("reveal-image-src");
        const tapButton = document.getElementById("tap-button");

        // Estado do jogo
        let score = 0;
        let lastCheckPoint = 0; 
        let isJumping = false;
        let isGameOver = false;
        let gameActive = false; 
        let obstacleTimeout;
        let scoreInterval;
        
        // --- CONFIGURA√á√ÉO DA REVELA√á√ÉO ---
        const SEXO_DO_BEBE = "MENINA"; 

        const IMAGEM_MENINO = "https://raw.githubusercontent.com/handerson-br/handerson-br.github.io/refs/heads/main/Gemini_Generated_Image_nurngrnurngrnurn.png";
        const IMAGEM_MENINA = "https://raw.githubusercontent.com/handerson-br/handerson-br.github.io/refs/heads/main/Gemini_Generated_Image_j0nzszj0nzszj0nz.png";

        // Mensagens narrativas baseadas na pontua√ß√£o
        const messages = {
            150: "O caminho come√ßou! üë£\nA jornada est√° a todo vapor.",
            300: "Metade do caminho! ‚ú®\nEstamos chegando perto!",
            350: "Quase l√°! üéà\nO segredo est√° prestes a ser revelado.",
            final: {
                "MENINA": "√â a AMANDA! ü©∑\nO mundo vai ficar mais cor-de-rosa!",
                "MENINO": "√â o LEVI! üíô\nMais um pequeno pr√≠ncipe est√° a caminho!"
            }
        };

        let milestonesReached = { 150: false, 300: false, 350: false, 500: false };

        // Inicializa o jogo e as tarefas em segundo plano (nuvens, brilhos)
        function startGame() {
            startScreen.style.display = "none";
            player.style.opacity = "1";
            scoreBoard.style.display = "block";
            tapButton.style.display = "flex";
            gameActive = true;
            scoreInterval = setInterval(updateScore, 120);
            createObstacle();
            setInterval(createCloud, 4000);
            setInterval(createSparkle, 1500);
        }

        // L√≥gica do salto da cegonha
        function jump() {
            if (isJumping || !gameActive || isGameOver) return;
            isJumping = true;
            player.classList.add("jump-animation");
            setTimeout(() => {
                player.classList.remove("jump-animation");
                isJumping = false;
            }, 800); 
        }

        // Cria part√≠culas visuais aleat√≥rias
        function createSparkle() {
            if (!gameActive || isGameOver) return;
            const sparkle = document.createElement("div");
            sparkle.classList.add("sparkle");
            const size = Math.random() * 4 + 2;
            sparkle.style.width = size + "px";
            sparkle.style.height = size + "px";
            sparkle.style.left = Math.random() * 100 + "%";
            sparkle.style.top = Math.random() * 60 + "%";
            gameContainer.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 2000);
        }

        // Gerador infinito de obst√°culos com colis√£o
        function createObstacle() {
            if (!gameActive || isGameOver) return;

            const obstacle = document.createElement("div");
            obstacle.classList.add("obstacle");
            const icons = ["üçº", "üß∏", "üéÄ", "üëü", "üé°", "ü§±", "üê•", "‚öΩ", "üéà", "üë∂üèª", "üé†", "üöÄ"];
            obstacle.innerText = icons[Math.floor(Math.random() * icons.length)];
            gameContainer.appendChild(obstacle);

            let obstaclePos = gameContainer.offsetWidth;
            let speed = 3.5 + (score / 400); // Velocidade aumenta com a pontua√ß√£o

            function move() {
                if (!gameActive || isGameOver) {
                    obstacle.remove();
                    return;
                }

                obstaclePos -= speed;
                obstacle.style.left = obstaclePos + "px";

                // C√°lculo de colis√£o entre rect√¢ngulos (bounding boxes)
                let p = player.getBoundingClientRect();
                let o = obstacle.getBoundingClientRect();

                if (p.right - 25 > o.left && p.left + 25 < o.right && p.bottom - 15 > o.top) {
                    gameOver();
                    obstacle.remove();
                    return;
                }

                if (obstaclePos < -60) {
                    obstacle.remove();
                } else {
                    requestAnimationFrame(move);
                }
            }
            requestAnimationFrame(move);
            
            // Tempo de spawn aleat√≥rio que diminui com o tempo (aumenta dificuldade)
            let nextSpawn = Math.random() * (1800 - (score/2)) + 1400;
            obstacleTimeout = setTimeout(createObstacle, Math.max(nextSpawn, 1100));
        }

        // Atualiza√ß√£o cont√≠nua da pontua√ß√£o e verifica√ß√£o de metas
        function updateScore() {
            if (!gameActive || isGameOver) return;
            score += 1;
            scoreBoard.innerText = score.toString().padStart(4, '0');

            // Verifica checkpoints
            [150, 300, 350].forEach(m => {
                if (score === m && !milestonesReached[m]) {
                    milestonesReached[m] = true;
                    lastCheckPoint = m;
                    pauseGame(messages[m]);
                }
            });

            // Vit√≥ria / Revela√ß√£o final aos 500 pontos
            if (score >= 500 && !milestonesReached[500]) {
                milestonesReached[500] = true;
                revealSex();
            }
        }

        // Pausa o jogo para mostrar mensagens de progresso
        function pauseGame(msg) {
            gameActive = false;
            clearInterval(scoreInterval); 
            modalTitle.innerText = "Checkpoint!";
            modalBody.innerText = msg;
            
            revealContainer.style.display = "none";
            checkpointIcon.style.display = "flex";
            checkpointIcon.innerText = "‚ú®";
            
            modalOverlay.style.display = "flex";
            tapButton.style.display = "none";
        }

        // Fecha modais e retoma o estado ativo
        function closeModal() {
            if (isGameOver && score >= 500) {
                location.reload(); // Reinicia ap√≥s a revela√ß√£o
                return;
            }
            if (isGameOver) {
                isGameOver = false;
                score = lastCheckPoint; // Retorna ao √∫ltimo checkpoint salvo
                scoreBoard.innerText = score.toString().padStart(4, '0');
                document.querySelectorAll('.obstacle').forEach(o => o.remove());
            }
            modalOverlay.style.display = "none";
            tapButton.style.display = "flex";
            gameActive = true;
            scoreInterval = setInterval(updateScore, 120);
            createObstacle(); 
        }

        // Trata a derrota do jogador
        function gameOver() {
            gameActive = false;
            isGameOver = true;
            clearInterval(scoreInterval);
            clearTimeout(obstacleTimeout);
            tapButton.style.display = "none";
            
            modalTitle.innerText = "Ops!";
            modalBody.innerText = `A cegonha parou para descansar. Continuar de ${lastCheckPoint} pontos?`;
            document.getElementById("modal-btn").innerText = "Continuar";
            
            revealContainer.style.display = "none";
            checkpointIcon.style.display = "flex";
            checkpointIcon.innerText = "üí§";
            
            modalOverlay.style.display = "flex";
        }

        // Fun√ß√£o principal da revela√ß√£o do sexo
        function revealSex() {
            gameActive = false;
            isGameOver = true;
            clearInterval(scoreInterval);
            clearTimeout(obstacleTimeout);
            tapButton.style.display = "none";
            
            const res = messages.final[SEXO_DO_BEBE];
            modalTitle.innerText = "üéä SURPRESA! üéä";
            modalBody.innerHTML = `<span class="${SEXO_DO_BEBE === 'MENINA' ? 'reveal-girl' : 'reveal-boy'}" style="font-size: 22px;">${res}</span>`;
            
            checkpointIcon.style.display = "none";
            revealContainer.style.display = "flex";
            revealImageSrc.src = SEXO_DO_BEBE === 'MENINA' ? IMAGEM_MENINA : IMAGEM_MENINO;

            modalOverlay.style.display = "flex";
            document.getElementById("modal-btn").innerText = "Reiniciar";
        }

        // Cria nuvens que cruzam o ecr√£
        function createCloud() {
            if (!gameActive || isGameOver) return;
            const cloud = document.createElement("div");
            cloud.classList.add("cloud");
            cloud.innerText = "‚òÅÔ∏è";
            cloud.style.top = Math.random() * 200 + "px";
            // CORRE√á√ÉO: s agora est√° dentro da string para evitar SyntaxError
            cloud.style.animationDuration = (Math.random() * 12 + 10) + "s";
            gameContainer.appendChild(cloud);
            setTimeout(() => cloud.remove(), 25000);
        }

        // Listeners para intera√ß√£o t√°til e rato
        tapButton.addEventListener("touchstart", (e) => {
            e.preventDefault();
            jump();
        });
        tapButton.addEventListener("mousedown", jump);

        // Atalhos de teclado
        window.addEventListener("keydown", (e) => {
            if (e.code === "Space") { 
                e.preventDefault(); 
                jump(); 
            }
            
            // "Cheat code" para debug/revela√ß√£o r√°pida (Ctrl + 5)
            if (e.ctrlKey && e.key === "5") {
                e.preventDefault();
                score = 500;
                milestonesReached[150] = true;
                milestonesReached[300] = true;
                milestonesReached[350] = true;
                if (!milestonesReached[500]) {
                    milestonesReached[500] = true;
                    revealSex();
                }
            }
        });
    </script>
</body>
</html>