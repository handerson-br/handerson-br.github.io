<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ch√° Revela√ß√£o - O Jogo</title>
    <style>
        :root {
            --primary-pink: #ffb6c1;
            --primary-blue: #87ceeb;
            --ground-height: 140px; 
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: #1a1a1a; 
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            touch-action: none;
        }

        #game-container {
            width: 375px; 
            height: 667px; 
            max-width: 100vw;
            max-height: 100vh;
            /* In√≠cio com azul beb√™ */
            background: linear-gradient(to bottom, #87ceeb, #f0faff);
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            border: 8px solid #333;
            border-radius: 40px;
            transition: background 5s ease-in-out;
        }

        /* Movimento Orbital */
        .celestial-orbit {
            position: absolute;
            top: 150px; /* Centro da √≥rbita */
            left: 50%;
            width: 1px;
            height: 1px;
            z-index: 1;
        }

        .celestial-body {
            position: absolute;
            width: 60px;
            height: 60px;
            font-size: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
            /* Raio da √≥rbita */
            margin-left: -30px;
            margin-top: -30px;
            transition: opacity 2s ease-in-out;
        }

        #sun { opacity: 1; }
        #moon { opacity: 0; }

        .mountain {
            position: absolute;
            bottom: var(--ground-height);
            background: rgba(255, 255, 255, 0.15);
            clip-path: polygon(50% 0%, 0% 100%, 100% 100%);
            z-index: 2;
        }

        .sparkle {
            position: absolute;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            z-index: 3;
            animation: twinkle 2s infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0; transform: scale(0); }
            50% { opacity: 0.6; transform: scale(1.2); }
        }

        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: var(--ground-height);
            background-color: #ffffff;
            border-top: 6px solid #f0f0f0;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #tap-button {
            width: 80%;
            height: 60px;
            background: linear-gradient(135deg, #eee, #fff);
            border: 3px solid #ddd;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 0 #ccc;
            cursor: pointer;
            transition: all 0.1s;
            z-index: 20;
        }

        #tap-button:active {
            transform: translateY(3px);
            box-shadow: 0 1px 0 #ccc;
        }

        .tap-text {
            color: #888;
            font-weight: 900;
            font-size: 18px;
            letter-spacing: 2px;
        }

        #player-wrapper {
            position: absolute;
            bottom: var(--ground-height);
            left: 50px;
            width: 75px;
            height: 90px;
            z-index: 15;
            display: flex;
            flex-direction: column;
            align-items: center;
            opacity: 0;
            transition: opacity 0.3s;
        }

        #player {
            width: 75px;
            height: 75px;
        }

        #player img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        #player-shadow {
            width: 40px;
            height: 6px;
            background: rgba(0,0,0,0.15);
            border-radius: 50%;
            margin-top: -5px;
            transition: transform 0.8s cubic-bezier(0.34, 1.5, 0.64, 1), opacity 0.8s;
        }

        .obstacle {
            width: 45px;
            height: 45px;
            position: absolute;
            bottom: var(--ground-height);
            right: -60px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            z-index: 12;
        }

        #score-board {
            position: absolute;
            top: 40px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 32px;
            font-weight: 900;
            color: white;
            z-index: 40;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: rgba(0,0,0,0.1);
            padding: 5px 20px;
            border-radius: 20px;
            display: none; 
        }

        .jump-animation {
            animation: jump 0.8s cubic-bezier(0.34, 1.5, 0.64, 1);
        }

        .shadow-jump {
            transform: scale(0.4);
            opacity: 0.1;
        }

        @keyframes jump {
            0% { transform: translateY(0) rotate(0deg); }
            45% { transform: translateY(-180px) rotate(-10deg); }
            55% { transform: translateY(-180px) rotate(-10deg); }
            100% { transform: translateY(0) rotate(0deg); }
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 100;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 25px;
            border-radius: 30px;
            text-align: center;
            max-width: 320px;
            width: 100%;
            animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .reveal-container {
            width: 100%;
            height: auto;
            max-height: 250px; 
            margin-bottom: 10px;
            border-radius: 15px;
            overflow: hidden;
            display: none;
            justify-content: center;
            align-items: center;
            background: #f9f9f9;
            border: 2px solid #eee;
        }

        .reveal-container img {
            width: 100%;
            height: 100%;
            object-fit: contain; 
            display: block;
        }

        .baby-photo-default {
            width: 90px;
            height: 90px;
            border-radius: 50%;
            margin: 0 auto 5px;
            border: 4px solid var(--primary-pink);
            background-color: #f8f8f8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 45px;
        }

        @keyframes pop {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .btn {
            margin-top: 10px;
            padding: 15px 35px;
            border: none;
            border-radius: 25px;
            background: #444;
            color: white;
            font-weight: 800;
            cursor: pointer;
            font-size: 16px;
        }

        .reveal-girl { color: #ff69b4; font-weight: 900; }
        .reveal-boy { color: #1e90ff; font-weight: 900; }

        .cloud {
            position: absolute;
            color: rgba(255, 255, 255, 0.8);
            font-size: 40px;
            animation: moveClouds linear infinite;
            z-index: 5;
        }

        @keyframes moveClouds {
            from { left: 110%; }
            to { left: -80px; }
        }

        #audio-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            z-index: 150;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body id="main-body">

    <div id="game-container">
        <!-- Container Orbital -->
        <div class="celestial-orbit">
            <div id="sun" class="celestial-body">‚òÄÔ∏è</div>
            <div id="moon" class="celestial-body">üåô</div>
        </div>

        <button id="audio-toggle" onclick="toggleAudio()">üîá</button>

        <div class="mountain" style="width: 150px; height: 80px; left: -30px; opacity: 0.3;"></div>
        <div class="mountain" style="width: 250px; height: 120px; right: -50px; opacity: 0.2;"></div>

        <div id="start-screen" class="overlay">
            <div class="modal-content">
                <div class="baby-photo-default">üë∂</div>
                <h1 style="color: #333; font-size: 24px;">Ch√° Revela√ß√£o</h1>
                <p style="color: #666; margin: 10px 0;">Ajude a cegonha na jornada para revelar o segredo!</p>
                <button class="btn" style="background: var(--primary-blue); color: #333;" onclick="startGame()">Come√ßar Viagem</button>
            </div>
        </div>

        <div id="score-board">0000</div>
        
        <div id="player-wrapper">
            <div id="player">
                <img src="https://cdn-icons-png.freepik.com/512/7433/7433080.png" alt="Cegonha">
            </div>
            <div id="player-shadow"></div>
        </div>

        <div class="ground">
            <div id="tap-button" style="display: none;">
                <span class="tap-text">PULAR</span>
            </div>
        </div>

        <div id="modal-overlay" class="overlay" style="display: none;">
            <div class="modal-content">
                <div id="checkpoint-icon" class="baby-photo-default">‚ú®</div>
                <div id="reveal-image-container" class="reveal-container">
                    <img id="reveal-image-src" src="" alt="Revela√ß√£o">
                </div>
                <h2 id="modal-title" style="font-size: 20px;">Mensagem</h2>
                <p id="modal-body" style="margin: 10px 0; color: #555;"></p>
                <button class="btn" id="modal-btn" onclick="closeModal()">Continuar</button>
            </div>
        </div>
    </div>

    <script>
        // --- SISTEMA DE √ÅUDIO ---
        let audioCtx = null;
        let musicActive = false;
        const melody = [
            { f: 261.63, d: 0.5 }, { f: 261.63, d: 0.5 }, { f: 392.00, d: 0.5 }, { f: 392.00, d: 0.5 },
            { f: 440.00, d: 0.5 }, { f: 440.00, d: 0.5 }, { f: 392.00, d: 1.0 },
            { f: 349.23, d: 0.5 }, { f: 349.23, d: 0.5 }, { f: 329.63, d: 0.5 }, { f: 329.63, d: 0.5 },
            { f: 293.66, d: 0.5 }, { f: 293.66, d: 0.5 }, { f: 261.63, d: 1.0 }
        ];

        function playNote(freq, duration) {
            if (!audioCtx) return;
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.type = 'sine';
            osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
            gain.gain.setValueAtTime(0.05, audioCtx.currentTime);
            gain.gain.exponentialRampToValueAtTime(0.0001, audioCtx.currentTime + duration);
            osc.connect(gain); gain.connect(audioCtx.destination);
            osc.start(); osc.stop(audioCtx.currentTime + duration);
        }

        function startInternalMusic() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            let noteIdx = 0;
            function playNext() {
                if (!musicActive) return;
                const note = melody[noteIdx];
                playNote(note.f, note.d);
                noteIdx = (noteIdx + 1) % melody.length;
                setTimeout(playNext, note.d * 1000);
            }
            musicActive = true;
            document.getElementById("audio-toggle").innerText = "üîä";
            playNext();
        }

        function toggleAudio() {
            if (!audioCtx) startInternalMusic();
            else if (audioCtx.state === 'running') {
                audioCtx.suspend(); document.getElementById("audio-toggle").innerText = "üîá"; musicActive = false;
            } else {
                audioCtx.resume(); document.getElementById("audio-toggle").innerText = "üîä"; musicActive = true;
            }
        }

        // --- L√ìGICA DO JOGO ---
        const player = document.getElementById("player");
        const playerWrapper = document.getElementById("player-wrapper");
        const playerShadow = document.getElementById("player-shadow");
        const gameContainer = document.getElementById("game-container");
        const scoreBoard = document.getElementById("score-board");
        const sun = document.getElementById("sun");
        const moon = document.getElementById("moon");
        const tapButton = document.getElementById("tap-button");

        let score = 0;
        let lastCheckPoint = 0; 
        let isJumping = false;
        let isGameOver = false;
        let gameActive = false; 
        let obstacleTimeout;
        let scoreInterval;
        
        // Configura√ß√£o do Ciclo Orbital
        let celestialAngle = -180; // Come√ßa na esquerda
        const orbitalRadius = 180; 
        let cycleDirection = 1; // 1 para dia, -1 para noite

        const SEXO_DO_BEBE = "MENINO"; 
        const IMAGEM_MENINO = "https://raw.githubusercontent.com/handerson-br/handerson-br.github.io/refs/heads/main/Gemini_Generated_Image_nurngrnurngrnurn.png";
        const IMAGEM_MENINA = "https://raw.githubusercontent.com/handerson-br/handerson-br.github.io/refs/heads/main/Gemini_Generated_Image_j0nzszj0nzszj0nz.png";

        const messages = {
            150: "O caminho come√ßou! üë£\nA jornada est√° a todo vapor.",
            300: "Metade do caminho! ‚ú®\nEstamos chegando perto!",
            350: "Quase l√°! üéà\nO segredo est√° prestes a ser revelado.",
            final: {
                "MENINA": "√â a AMANDA! ü©∑\nO mundo vai ficar cor-de-rosa!",
                "MENINO": "√â o LEVI! üíô\nO nosso pequeno pr√≠ncipe est√° a caminho!"
            }
        };

        let milestonesReached = { 150: false, 300: false, 350: false, 500: false };

        function startGame() {
            document.getElementById("start-screen").style.display = "none";
            playerWrapper.style.opacity = "1";
            scoreBoard.style.display = "block";
            tapButton.style.display = "flex";
            startInternalMusic();
            gameActive = true;
            scoreInterval = setInterval(updateScore, 120);
            createObstacle();
            setInterval(createCloud, 4000);
            setInterval(createSparkle, 1500);
            requestAnimationFrame(updateOrbit);
        }

        function updateOrbit() {
            if (!gameActive || isGameOver) return;

            // Incremento lento do √¢ngulo orbital
            celestialAngle += 0.2; 
            
            // Ciclo de 360 graus: 0-180 (Sol), 180-360 (Lua)
            if (celestialAngle >= 180) celestialAngle = -180;

            const rad = celestialAngle * (Math.PI / 180);
            const x = Math.cos(rad) * orbitalRadius;
            const y = Math.sin(rad) * orbitalRadius;

            // Posiciona os astros (Sol e Lua em lados opostos da √≥rbita)
            sun.style.transform = `translate(${x}px, ${y}px)`;
            
            // Lua est√° a 180 graus do sol
            const radMoon = (celestialAngle + 180) * (Math.PI / 180);
            const xm = Math.cos(radMoon) * orbitalRadius;
            const ym = Math.sin(radMoon) * orbitalRadius;
            moon.style.transform = `translate(${xm}px, ${ym}px)`;

            // Opacidade baseada na altura (y)
            if (y < 0) { // Sol Vis√≠vel
                sun.style.opacity = 1;
                moon.style.opacity = 0;
                // Transi√ß√£o suave Azul -> Rosa
                gameContainer.style.background = "linear-gradient(to bottom, #87ceeb, #fce4ec)";
            } else { // Lua Vis√≠vel
                sun.style.opacity = 0;
                moon.style.opacity = 1;
                // Transi√ß√£o suave Azul Escuro -> Rosa Choque
                gameContainer.style.background = "linear-gradient(to bottom, #2c3e50, #ff80ab)";
            }

            requestAnimationFrame(updateOrbit);
        }

        function jump() {
            if (isJumping || !gameActive || isGameOver) return;
            isJumping = true;
            player.classList.add("jump-animation");
            playerShadow.classList.add("shadow-jump");
            setTimeout(() => {
                player.classList.remove("jump-animation");
                playerShadow.classList.remove("shadow-jump");
                isJumping = false;
            }, 800); 
        }

        function createSparkle() {
            if (!gameActive || isGameOver) return;
            const sparkle = document.createElement("div");
            sparkle.classList.add("sparkle");
            const size = Math.random() * 4 + 2;
            sparkle.style.width = size + "px"; sparkle.style.height = size + "px";
            sparkle.style.left = Math.random() * 100 + "%";
            sparkle.style.top = Math.random() * 60 + "%";
            gameContainer.appendChild(sparkle);
            setTimeout(() => sparkle.remove(), 2000);
        }

        function createObstacle() {
            if (!gameActive || isGameOver) return;
            const obstacle = document.createElement("div");
            obstacle.classList.add("obstacle");
            const icons = ["üçº", "üß∏", "üéÄ", "üëü", "üê•", "‚öΩ", "üéà", "üë∂üèª"];
            obstacle.innerText = icons[Math.floor(Math.random() * icons.length)];
            gameContainer.appendChild(obstacle);
            let obstaclePos = gameContainer.offsetWidth;
            let speed = 4 + (score / 350);

            function move() {
                if (!gameActive || isGameOver) { obstacle.remove(); return; }
                obstaclePos -= speed;
                obstacle.style.left = obstaclePos + "px";
                let p = player.getBoundingClientRect();
                let o = obstacle.getBoundingClientRect();
                if (p.right - 25 > o.left && p.left + 25 < o.right && p.bottom - 15 > o.top) {
                    gameOver(); obstacle.remove(); return;
                }
                if (obstaclePos < -60) obstacle.remove();
                else requestAnimationFrame(move);
            }
            requestAnimationFrame(move);
            let nextSpawn = Math.random() * (1600 - (score/2)) + 1200;
            obstacleTimeout = setTimeout(createObstacle, Math.max(nextSpawn, 900));
        }

        function updateScore() {
            if (!gameActive || isGameOver) return;
            score += 1;
            scoreBoard.innerText = score.toString().padStart(4, '0');
            [150, 300, 350].forEach(m => {
                if (score === m && !milestonesReached[m]) {
                    milestonesReached[m] = true;
                    lastCheckPoint = m;
                    pauseGame(messages[m]);
                }
            });
            if (score >= 500 && !milestonesReached[500]) {
                milestonesReached[500] = true;
                revealSex();
            }
        }

        function pauseGame(msg) {
            gameActive = false;
            clearInterval(scoreInterval); 
            document.getElementById("modal-title").innerText = "Checkpoint!";
            document.getElementById("modal-body").innerText = msg;
            document.getElementById("reveal-image-container").style.display = "none";
            document.getElementById("checkpoint-icon").style.display = "flex";
            document.getElementById("checkpoint-icon").innerText = "‚ú®";
            document.getElementById("modal-overlay").style.display = "flex";
            tapButton.style.display = "none";
        }

        function closeModal() {
            if (isGameOver && score >= 500) { location.reload(); return; }
            if (isGameOver) {
                isGameOver = false;
                score = lastCheckPoint;
                scoreBoard.innerText = score.toString().padStart(4, '0');
                document.querySelectorAll('.obstacle').forEach(o => o.remove());
                requestAnimationFrame(updateOrbit); // Reinicia √≥rbita
            }
            document.getElementById("modal-overlay").style.display = "none";
            tapButton.style.display = "flex";
            gameActive = true;
            scoreInterval = setInterval(updateScore, 120);
            createObstacle(); 
        }

        function gameOver() {
            gameActive = false; isGameOver = true;
            clearInterval(scoreInterval); clearTimeout(obstacleTimeout);
            tapButton.style.display = "none";
            document.getElementById("modal-title").innerText = "Ops!";
            document.getElementById("modal-body").innerText = `A cegonha parou para descansar. Continuar de ${lastCheckPoint} pontos?`;
            document.getElementById("modal-btn").innerText = "Continuar";
            document.getElementById("reveal-image-container").style.display = "none";
            document.getElementById("checkpoint-icon").style.display = "flex";
            document.getElementById("checkpoint-icon").innerText = "üí§";
            document.getElementById("modal-overlay").style.display = "flex";
        }

        function revealSex() {
            gameActive = false; isGameOver = true;
            clearInterval(scoreInterval); clearTimeout(obstacleTimeout);
            tapButton.style.display = "none";
            const res = messages.final[SEXO_DO_BEBE];
            document.getElementById("modal-title").innerText = "üéä SURPRESA! üéä";
            document.getElementById("modal-body").innerHTML = `<span class="${SEXO_DO_BEBE === 'MENINA' ? 'reveal-girl' : 'reveal-boy'}" style="font-size: 22px;">${res}</span>`;
            document.getElementById("checkpoint-icon").style.display = "none";
            document.getElementById("reveal-image-container").style.display = "flex";
            document.getElementById("reveal-image-src").src = SEXO_DO_BEBE === 'MENINA' ? IMAGEM_MENINA : IMAGEM_MENINO;
            document.getElementById("modal-overlay").style.display = "flex";
            document.getElementById("modal-btn").innerText = "Reiniciar";
        }

        function createCloud() {
            if (!gameActive || isGameOver) return;
            const cloud = document.createElement("div");
            cloud.classList.add("cloud");
            cloud.innerText = "‚òÅÔ∏è";
            cloud.style.top = Math.random() * 200 + "px";
            cloud.style.animationDuration = (Math.random() * 12 + 10) + "s";
            gameContainer.appendChild(cloud);
            setTimeout(() => cloud.remove(), 25000);
        }

        tapButton.addEventListener("touchstart", (e) => { e.preventDefault(); jump(); });
        tapButton.addEventListener("mousedown", jump);
        window.addEventListener("keydown", (e) => { if (e.code === "Space") { e.preventDefault(); jump(); } });
    </script>
</body>
</html>